!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.AnimQueue=t()}(this,function(){"use strict";var e=-1,t=function(t){t=t||{};var n,i,o,r,u,f,c=[],a=[],s=Date.now(),m=!1,l=function(){for(var e=c.length;e--;)c[e]()},h=function(){n=requestAnimationFrame(h),60!==r?(i=Date.now(),o=i-s,o>f&&(s=i-o%f,l())):l()},d=function(){f=1e3/r},g=function(e){for(var t=c.length;t--;)c[t]===e&&c.splice(t,1);if(a.length)for(var i=a.length;i--;)a[i].func===e&&a.splice(i,1);c.length||(cancelAnimationFrame(n),m=!1)},p=function(e){0>e&&(e=0),e>60&&(e=60),r=e,d()},v=function(e){u=e},y=function(e){if("function"!=typeof e)return!1;if(c.indexOf(e)>-1)for(var t=a.length;t--;)a[t].func===e&&(clearTimeout(a[t].timeoutId),a.splice(t,1));else c.push(e);return 1===c.length&&(h(),m=!0),!0},D=function(e,t){if(t){var n=setTimeout(function(){g(e)},u);a.push({timeoutId:n,func:e})}else g(e)};this._qid=++e,this.addToQueue=y,this.removeFromQueue=D,Object.defineProperties(this,{framerate:{get:function(){return r},set:p},removeDelay:{get:function(){return u},set:v},isAnimating:{get:function(){return m}}}),this.framerate=t.framerate||60,this.removeDelay=t.removeDelay||0,d()};return t});