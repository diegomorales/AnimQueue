!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.AnimQueue=n()}(this,function(){"use strict";var e=-1,n=function(n){n=n||{};var t,i,o,u,r,f,c=[],a=[],s=Date.now(),l=!1,m=function(){for(var e=c.length;e--;)c[e]()},h=function(){t=requestAnimationFrame(h),60!==u?(i=Date.now(),o=i-s,o>f&&(s=i-o%f,m())):m()},d=function(){f=1e3/u},g=function(e){for(var n=c.length;n--;)c[n]===e&&c.splice(n,1);if(a.length)for(var i=a.length;i--;)a[i].func===e&&a.splice(i,1);c.length||(cancelAnimationFrame(t),l=!1)},p=function(e){0>e&&(e=0),e>60&&(e=60),u=e,d()},v=function(e){r=e},y=function(e){if("function"!=typeof e)return!1;if(c.indexOf(e)>-1)for(var n=a.length;n--;)a[n].func===e&&(clearTimeout(a[n].timeoutId),a.splice(n,1));else c.push(e);return 1===c.length&&(h(),l=!0),!0},A=function(e,n){if(n){var t=setTimeout(function(){g(e)},r);a.push({timeoutId:t,func:e})}else g(e)};p(n.framerate||60),v(n.removeDelay||0),d(),this._qid=++e,this.addToQueue=y,this.removeFromQueue=A,Object.defineProperties(this,{framerate:{get:function(){return u},set:p},delay:{get:function(){return r},set:v},isAnimating:{get:function(){return l}}})};return n});