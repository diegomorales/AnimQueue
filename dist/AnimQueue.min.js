!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.AnimQueue=t()}(this,function(){"use strict";var e=-1,t=function(t){t=t||{};var n,i,o,r,u,f=[],c=[],a=Date.now(),s=t.removeDelay||0,m=!1,h=function(){for(var e=f.length;e--;)f[e]()},l=function(){n=requestAnimationFrame(l),60!==r?(i=Date.now(),o=i-a,o>u&&(a=i-o%u,h())):h()},d=function(){u=1e3/r},p=function(e){for(var t=f.length;t--;)f[t]===e&&f.splice(t,1);if(c.length)for(var i=c.length;i--;)c[i].func===e&&c.splice(i,1);f.length||(cancelAnimationFrame(n),m=!1)},v=function(e){0>e&&(e=0),e>60&&(e=60),r=e,d()},g=function(e){s=e},y=function(e){if("function"!=typeof e)return!1;if(f.indexOf(e)>-1)for(var t=c.length;t--;)c[t].func===e&&(clearTimeout(c[t].timeoutId),c.splice(t,1));else f.push(e);return 1===f.length&&(l(),m=!0),!0},A=function(e,t){if(t){var n=setTimeout(function(){p(e)},s);c.push({timeoutId:n,func:e})}else p(e)};v(t.framerate||60),d(),this._qid=++e,this.addToQueue=y,this.removeFromQueue=A,this.setFramerate=v,this.setRemoveDelay=g,this.isAnimating=function(){return m},Object.defineProperty(this,"framerate",{get:function(){return r},set:v})};return t});